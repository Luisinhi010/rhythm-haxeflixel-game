# ğŸµ HaxeFlixel Rhythm Game

> Um jogo de ritmo moderno inspirado em Guitar Hero e Friday Night Funkin', desenvolvido com Haxe e HaxeFlixel.

[![Haxe](https://img.shields.io/badge/Haxe-4.0+-orange.svg)](https://haxe.org/)
[![HaxeFlixel](https://img.shields.io/badge/HaxeFlixel-5.0+-green.svg)](https://haxeflixel.com/)
[![License](https://img.shields.io/badge/license-MIT-blue.svg)](LICENSE)

## ğŸ“‹ Sobre o Projeto

Um jogo de ritmo multiplataforma onde o jogador pressiona teclas direcionais sincronizadas com a mÃºsica. O gameplay apresenta uma barra central com barras vindas dos lados da tela, lembrando a batalha contra Undyne de Undertale, mas em formato de jogo de ritmo.

### âœ¨ CaracterÃ­sticas

- ğŸ® **Sistema de Ritmo AvanÃ§ado**: Engine precisa com suporte a BPM variÃ¡vel e mudanÃ§as de tempo
- ğŸµ **Sistema de MÃºsica Completo**: Metadados JSON com cue points e mudanÃ§as de tempo
- ğŸ¨ **Visual CustomizÃ¡vel**: Temas e cores personalizÃ¡veis
- ğŸ”§ **Ferramentas de Debug**: Debugger visual do Conductor e testador de utilitÃ¡rios
- ğŸŒ **Multiplataforma**: Windows, Web (HTML5) e Android

### ğŸ¯ Recursos Implementados

- âœ… Sistema Conductor para controle de ritmo e mÃºsica
- âœ… Carregamento e parsing de metadados de mÃºsica (JSON)
- âœ… Sistema de cache de assets otimizado
- âœ… Gerenciador de input configurÃ¡vel
- âœ… Ferramentas de debug visual (ConductorDebugger, UtilTester)
- âœ… UtilitÃ¡rios matemÃ¡ticos, de string e arrays
- âœ… Sistema de arquitetura modular e escalÃ¡vel

### ğŸš§ Em Desenvolvimento

- â³ Sistema de gameplay completo (barras, pontuaÃ§Ã£o, combo)
- â³ Interface de seleÃ§Ã£o de mÃºsicas
- â³ Sistema de dificuldade
- â³ Menu principal e configuraÃ§Ãµes

## ğŸš€ ComeÃ§ando

### PrÃ©-requisitos

Antes de comeÃ§ar, vocÃª precisa ter instalado:

- [Haxe](https://haxe.org/download/) (4.0 ou superior)
- [HaxeFlixel](https://haxeflixel.com/documentation/install-haxeflixel/) (instale via haxelib)

### ğŸ“¦ InstalaÃ§Ã£o

1. **Clone o repositÃ³rio**

   ```bash
   git clone https://github.com/Luisinhi010/rhythm-haxeflixel-game.git
   cd rhythm-haxeflixel-game
   ```

2. **Instale as dependÃªncias do Haxe**

   ```bash
   haxelib install lime
   haxelib install openfl
   haxelib install flixel
   ```

3. **Configure o HaxeFlixel** (primeira vez apenas)

   ```bash
   haxelib run lime setup
   haxelib run flixel-tools setup
   ```

### â–¶ï¸ Como Executar

#### Windows (Debug)

```bash
lime test windows -debug
```

#### Web/HTML5 (Debug)

```bash
lime test html5 -debug
```

#### Android (Requer Android SDK configurado)

```bash
lime test android
```

#### Modo Release

```bash
lime test windows -release
```

### ğŸ® Controles de Debug

No **DebugState** (estado inicial em debug):

- **SPACE**: Play/Pause da mÃºsica
- **R**: Reiniciar mÃºsica
- **Q**: Pular para cue point "test"
- **T**: Abrir/Fechar UtilTester (demonstraÃ§Ãµes visuais)
- **F5**: Recarregar estado atual (disponÃ­vel em todos os estados)
- **Setas**: Navegar entre seÃ§Ãµes no UtilTester

## ğŸ“ Estrutura do Projeto

```text
rhythm-haxeflixel-game/
â”œâ”€â”€ source/
â”‚   â”œâ”€â”€ Main.hx                    # Ponto de entrada
â”‚   â”œâ”€â”€ Util.hx                    # UtilitÃ¡rios de plataforma
â”‚   â”œâ”€â”€ backend/                   # UtilitÃ¡rios e sistemas core
â”‚   â”‚   â”œâ”€â”€ Paths.hx               # Sistema de cache de assets
â”‚   â”‚   â”œâ”€â”€ InputManager.hx        # Gerenciador de input
â”‚   â”‚   â”œâ”€â”€ FilePath.hx            # Gerenciamento de caminhos
â”‚   â”‚   â”œâ”€â”€ FlxGroupContainer.hx   # Container posicionÃ¡vel
â”‚   â”‚   â”œâ”€â”€ BeatEvent.hx           # Typedef de eventos de batida
â”‚   â”‚   â””â”€â”€ MusicMetaData.hx       # Typedef de metadados
â”‚   â”œâ”€â”€ core/
â”‚   â”‚   â””â”€â”€ utils/                 # UtilitÃ¡rios gerais
â”‚   â”‚       â”œâ”€â”€ MathUtil.hx        # FunÃ§Ãµes matemÃ¡ticas
â”‚   â”‚       â”œâ”€â”€ StringUtil.hx      # FormataÃ§Ã£o de strings
â”‚   â”‚       â””â”€â”€ ArrayUtil.hx       # ManipulaÃ§Ã£o de arrays
â”‚   â”œâ”€â”€ objects/                   # Objetos do jogo
â”‚   â”‚   â”œâ”€â”€ Conductor.hx           # Sistema de ritmo e mÃºsica
â”‚   â”‚   â”œâ”€â”€ Song.hx                # Container de dados musicais
â”‚   â”‚   â”œâ”€â”€ DefaultBar.hx          # Barra base do jogo
â”‚   â”‚   â”œâ”€â”€ ConductorDebugger.hx   # Debug visual do Conductor
â”‚   â”‚   â”œâ”€â”€ Metronome.hx           # Sons de metrÃ´nomo
â”‚   â”‚   â””â”€â”€ UtilTester.hx          # Tester visual de utilitÃ¡rios
â”‚   â””â”€â”€ states/                    # Estados do jogo
â”‚       â”œâ”€â”€ DefaultState.hx        # Estado base
â”‚       â”œâ”€â”€ PlayState.hx           # Estado de gameplay
â”‚       â””â”€â”€ DebugState.hx          # Estado de testes
â”œâ”€â”€ assets/
â”‚   â”œâ”€â”€ images/                    # Imagens e sprites
â”‚   â”œâ”€â”€ music/                     # Arquivos de mÃºsica + JSON
â”‚   â”œâ”€â”€ sounds/                    # Efeitos sonoros
â”‚   â””â”€â”€ ui/                        # Assets de UI
â”œâ”€â”€ Project.xml                    # ConfiguraÃ§Ã£o do projeto
â”œâ”€â”€ hxformat.json                  # ConfiguraÃ§Ã£o de formataÃ§Ã£o
â””â”€â”€ README.MD                      # Este arquivo
```

## ğŸµ Formato de Metadados de MÃºsica

Coloque arquivos `.json` na pasta `assets/music/` com o mesmo nome do arquivo de Ã¡udio:

```json
{
    "title": "Nome da MÃºsica",
    "artist": "Nome do Artista",
    "bpm": 120,
    "offset": 0,
    "timeSignature": "4/4",
    "cuePoints": {
        "intro": 0,
        "verse": 15000,
        "chorus": 30000
    },
    "tempoChanges": [
        { "time": 60000, "bpm": 125 },
        { "time": 90000, "bpm": 130 }
    ],
    "looped": false
}
```

**Campos:**

- `title`: Nome da mÃºsica
- `artist`: Nome do artista
- `bpm`: Batidas por minuto (inicial)
- `offset`: Delay inicial em milissegundos (opcional)
- `timeSignature`: FÃ³rmula de compasso (opcional, padrÃ£o: "4/4")
- `cuePoints`: Pontos de referÃªncia nomeados em ms (opcional)
- `tempoChanges`: MudanÃ§as de BPM durante a mÃºsica (opcional)
- `looped`: Se deve tocar em loop (opcional)

## ğŸ—ï¸ Arquitetura

### PadrÃµes de Design

- **State Pattern**: Estados do jogo (PlayState, DebugState)
- **Singleton**: Gerenciadores globais (InputManager, Paths cache)
- **Observer Pattern**: Sistema de callbacks de batidas do Conductor
- **Facade Pattern**: Paths.hx simplifica acesso a assets

### Sistemas Principais

#### 1. Sistema Conductor

Gerencia reproduÃ§Ã£o de mÃºsica e tracking de ritmo:

- CÃ¡lculo preciso de beats, steps, bars e sections
- Suporte a mudanÃ§as de BPM
- Callbacks para eventos de ritmo
- Sistema de cue points

#### 2. Sistema de Assets (Paths)

- Cache automÃ¡tico de recursos
- Carregamento sÃ­ncrono e assÃ­ncrono
- Suporte multiplataforma
- Gerenciamento de memÃ³ria

#### 3. UtilitÃ¡rios Core

- **MathUtil**: FunÃ§Ãµes matemÃ¡ticas (lerp, clamp, mapRange, etc.)
- **StringUtil**: FormataÃ§Ã£o de texto e tempo
- **ArrayUtil**: ManipulaÃ§Ã£o de arrays com seguranÃ§a

## ğŸ› ï¸ Desenvolvimento

### Estilo de CÃ³digo

- IndentaÃ§Ã£o: **Tabs** (convenÃ§Ã£o HaxeFlixel)
- Chaves: Linha nova para abertura/fechamento (exceto object literals)
- Nomenclatura:
  - Classes: `PascalCase`
  - VariÃ¡veis/FunÃ§Ãµes: `camelCase`
  - Constantes: `UPPER_CASE`
- Type annotations obrigatÃ³rias
- Veja `hxformat.json` para detalhes

### Build Targets

```bash
# Desktop
lime build windows
lime build linux
lime build mac

# Web
lime build html5

# Mobile
lime build android
lime build ios
```

### Testes

Use o **DebugState** para:

- Testar o sistema Conductor com mÃºsicas diferentes
- Visualizar beats e cue points no ConductorDebugger
- Testar utilitÃ¡rios com o UtilTester (pressione T)

## ğŸ“ DocumentaÃ§Ã£o

DocumentaÃ§Ã£o detalhada disponÃ­vel em:

- `.github/copilot-instructions.md` - Guia completo para desenvolvedores
- `plano.txt` - Design document em portuguÃªs

## ğŸ¤ Contribuindo

ContribuiÃ§Ãµes sÃ£o bem-vindas! Por favor:

1. Fork o projeto
2. Crie uma branch para sua feature (`git checkout -b feature/NovaFeature`)
3. Commit suas mudanÃ§as (`git commit -m 'Adiciona NovaFeature'`)
4. Push para a branch (`git push origin feature/NovaFeature`)
5. Abra um Pull Request

## ğŸ“„ LicenÃ§a

Este projeto Ã© open source e estÃ¡ disponÃ­vel sob a [MIT License](LICENSE).

## ğŸ‘¤ Autor

### Luisinhi010

- GitHub: [@Luisinhi010](https://github.com/Luisinhi010)

## ğŸ™ Agradecimentos

- Comunidade HaxeFlixel
- InspiraÃ§Ã£o: Guitar Hero, Friday Night Funkin', Undertale
- Todos os contribuidores do projeto

---

â­ Se este projeto foi Ãºtil, considere dar uma estrela!
